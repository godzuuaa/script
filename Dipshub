local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- === ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Remote ‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡πÄ‡∏ó‡∏° ===
local RequestRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("GiftRequestEvent")
local AcceptRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("GiftAcceptEvent")
local ItemName = "Rainbow_Smurfo_Gatto__Volcano" 

local SelectedTarget = nil
local AutoRequestActive = false
_G.AutoAcceptActive = false

-- === UI Setup (All-in-One) ===
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "UltraCombinedUI"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 220, 0, 350) -- ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°
MainFrame.Position = UDim2.new(0, 10, 0, 10)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Parent = ScreenGui

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 10)

local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 25, 0, 25)
CloseBtn.Position = UDim2.new(1, -30, 0, 5)
CloseBtn.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.Parent = MainFrame
Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(1, 0)
CloseBtn.MouseButton1Click:Connect(function() ScreenGui:Destroy() end)

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -40, 0, 35)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.Text = "üöÄ Ultra Hub (Req + Acc)"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 14
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = MainFrame

local SelectedLabel = Instance.new("TextLabel")
SelectedLabel.Size = UDim2.new(1, 0, 0, 20)
SelectedLabel.Position = UDim2.new(0, 0, 0, 35)
SelectedLabel.Text = "Target: None"
SelectedLabel.TextColor3 = Color3.fromRGB(0, 200, 255)
SelectedLabel.BackgroundTransparency = 1
SelectedLabel.Font = Enum.Font.Gotham
SelectedLabel.TextSize = 12
SelectedLabel.Parent = MainFrame

local PlayerList = Instance.new("ScrollingFrame")
PlayerList.Size = UDim2.new(0.9, 0, 0.4, 0)
PlayerList.Position = UDim2.new(0.05, 0, 0.18, 0)
PlayerList.CanvasSize = UDim2.new(0, 0, 0, 0)
PlayerList.ScrollBarThickness = 2
PlayerList.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
PlayerList.BorderSizePixel = 0
PlayerList.Parent = MainFrame

local ListLayout = Instance.new("UIListLayout", PlayerList)
ListLayout.Padding = UDim.new(0, 2)

-- === ‡∏õ‡∏∏‡πà‡∏°‡∏ü‡∏±‡∏á‡∏ä‡∏±‡πà‡∏ô 1: Auto Request (Spam) ===
local ToggleReqBtn = Instance.new("TextButton")
ToggleReqBtn.Size = UDim2.new(0.9, 0, 0, 40)
ToggleReqBtn.Position = UDim2.new(0.05, 0, 0.62, 0)
ToggleReqBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
ToggleReqBtn.Text = "START SPAM"
ToggleReqBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleReqBtn.Font = Enum.Font.GothamBold
ToggleReqBtn.Parent = MainFrame
Instance.new("UICorner", ToggleReqBtn).CornerRadius = UDim.new(0, 8)

-- === ‡∏õ‡∏∏‡πà‡∏°‡∏ü‡∏±‡∏á‡∏ä‡∏±‡πà‡∏ô 2: Auto Accept (‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å) ===
local ToggleAccBtn = Instance.new("TextButton")
ToggleAccBtn.Size = UDim2.new(0.9, 0, 0, 40)
ToggleAccBtn.Position = UDim2.new(0.05, 0, 0.8, 0)
ToggleAccBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
ToggleAccBtn.Text = "AUTO ACCEPT: OFF"
ToggleAccBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleAccBtn.Font = Enum.Font.GothamBold
ToggleAccBtn.Parent = MainFrame
Instance.new("UICorner", ToggleAccBtn).CornerRadius = UDim.new(0, 8)

-- === ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á ===
local dragging, dragInput, dragStart, startPos
MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true; dragStart = input.Position; startPos = MainFrame.Position
        input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- === ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô ===
local function updateList()
    for _, v in pairs(PlayerList:GetChildren()) do if v:IsA("TextButton") then v:Destroy() end end
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer then
            local b = Instance.new("TextButton")
            b.Size = UDim2.new(1, -5, 0, 25)
            b.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            b.Text = p.Name
            b.TextColor3 = Color3.fromRGB(255, 255, 255)
            b.Font = Enum.Font.Gotham; b.TextSize = 12; b.Parent = PlayerList
            Instance.new("UICorner", b).CornerRadius = UDim.new(0, 4)
            b.MouseButton1Click:Connect(function()
                SelectedTarget = p
                SelectedLabel.Text = "Target: " .. p.Name
            end)
        end
    end
    PlayerList.CanvasSize = UDim2.new(0, 0, 0, ListLayout.AbsoluteContentSize.Y)
end
Players.PlayerAdded:Connect(updateList); Players.PlayerRemoving:Connect(updateList); updateList()

-- === ‡∏õ‡∏∏‡πà‡∏° Logic ===
ToggleReqBtn.MouseButton1Click:Connect(function()
    AutoRequestActive = not AutoRequestActive
    ToggleReqBtn.Text = AutoRequestActive and "STOP SPAM" or "START SPAM"
    ToggleReqBtn.BackgroundColor3 = AutoRequestActive and Color3.fromRGB(0, 180, 50) or Color3.fromRGB(150, 0, 0)
end)

ToggleAccBtn.MouseButton1Click:Connect(function()
    _G.AutoAcceptActive = not _G.AutoAcceptActive
    ToggleAccBtn.Text = _G.AutoAcceptActive and "AUTO ACCEPT: ON" or "AUTO ACCEPT: OFF"
    ToggleAccBtn.BackgroundColor3 = _G.AutoAcceptActive and Color3.fromRGB(0, 120, 200) or Color3.fromRGB(80, 80, 80)
end)

-- === [LOOP] Auto Request ===
task.spawn(function()
    while true do
        if AutoRequestActive and SelectedTarget and SelectedTarget.Parent == Players then
            local Char = LocalPlayer.Character
            local Backpack = LocalPlayer:FindFirstChild("Backpack")
            local Item = (Char and Char:FindFirstChild(ItemName)) or (Backpack and Backpack:FindFirstChild(ItemName))
            
            if Item then
                if Item.Parent == Backpack and Char:FindFirstChildOfClass("Humanoid") then
                    Char.Humanoid:EquipTool(Item)
                end
                pcall(function()
                    RequestRemote:FireServer(SelectedTarget, Item)
                end)
            end
        end
        task.wait(0.1) -- ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß Request ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
    end
end)

-- === [LOOP] Auto Accept ===
task.spawn(function()
    while true do
        if _G.AutoAcceptActive then
            pcall(function()
                AcceptRemote:FireServer()
            end)
        end
        task.wait(0.01) -- ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏£‡∏±‡∏ö (0.01 ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏±‡∏ß‡∏°‡∏≤‡∏Å)
    end
end)
